# ICMP\(Internet Control Message Protocol\)

H3C网络设备-交换机中对ICMP数据进行流定义的方式：ACL条目

![](/assets/ICMP报文流定义.png) 

定义：网际控制报文协议，是一种面向连接的协议，常常被看做IP的一部分

功用：主要用来传递差错报文、控制报文和查询报文；IP本身没有内在机制来获取差错报文并处理，TCP/IP为了IP能够处理这些差错，设计了ICMP。

应用实例：当某个网关发现传输错误的时候，就向信源主机发送一个差错报文（ICMP报文），来报告差错信息，让信源主机采取相应的措施。

传输方式：ICMP报文在IP数据报文内部传输，被封装在IP数据报的数据部分。

![](/assets/icmp报文封装位置.png)

ICMP报文的数据结构：

![](/assets/icmp报文数据结构.png)

ICMP报文头长度为8字节，前四个字节的含义是固定不变的：

类型：前8比特位表示了ICMP报文类型

代码：8个比特位，表示指定类型中的一个功能，如果一个类型只有一种功能，则置为0.

校验和：16比特位的校验和



ICMP报文类型：

























